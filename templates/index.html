{% extends "base.html" %}
{% block content %}
<div class="max-w-7xl mx-auto py-8">
  <!-- Search and Filter -->
  <form method="get" class="flex flex-wrap gap-2 mb-6 justify-between">
    <input type="text" name="q" value="{{ query }}" placeholder="Search for a product..." 
           class="border rounded px-4 py-2 w-full md:w-1/3">
    <select name="category" class="border rounded px-4 py-2 w-full md:w-1/4">
      <option value="">All Categories</option>
      {% for cat in categories %}
      <option value="{{ cat }}" {% if cat==selected %}selected{% endif %}>{{ cat }}</option>
      {% endfor %}
    </select>
    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded">Search</button>
  </form>

  <!-- Product Grid -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
    {% for p in products %}
    <div class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition">
      <a href="/product/{{ p.id }}">
        <img src="{{ p.image }}" class="w-full h-40 object-contain mb-2">
        <h3 class="font-semibold text-lg">{{ p.name }}</h3>
      </a>
      <p class="text-blue-600 font-bold">${{ "%.2f"|format(p.price) }}</p>
      <p class="text-sm text-gray-500">{{ p.category }}</p>
      <p class="text-sm text-green-600">Stock: {{ p.stock }}</p>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
